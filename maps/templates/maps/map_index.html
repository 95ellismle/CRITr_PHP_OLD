{% extends 'maps/base.html' %}
{% load static %}


{% block content %}
  <!-- ESRI (arcGIS maps) API and stylesheet -->
  <link rel="stylesheet" href="https://js.arcgis.com/4.12/esri/themes/light/main.css">
  <script src="https://js.arcgis.com/4.12/"></script>

  <!-- My Scripts -->
  <script src="{% static 'js/cards.js' %}" type="text/javascript"></script>
  <script>
    const reportIncidentPage="{% url 'reportIncident' %}";
  </script>
  <script src="{% static 'js/maps.js' %}" type="text/javascript"></script>

 <!-- Reporting incident navbar -->
  <div id="reportIncidentBar" style="display: none";>
      <div style="float: left; width: 60px; display: inline-block; height:100%">
          <button class="navBtn"
                  onclick="cancelCreate()">
              <i class="material-icons" class="btnIcon">arrow_back</i>
          </button>
      </div>
      <div style="width: calc(100% - 120px); display: inline-block; height:100%; vertical-align: 'middle'">
          <p  class="titleReportTxt" style="padding: 0; margin: 0;">
              Tap to select a location
          </p>
      </div>
      <div id='submitReportBtn' style="float: right; width: 60px; display: none; height: 100%">
          <button class="navBtn"
                  onclick="submitReport()">
              OK
          </button>
      </div>
  </div>

  <!-- ESRI Maps Stuff -->
  <div id="viewDiv">
      <div id="topbar" style="background-color: rgba(0,0,0,0);">
          <button class="action-button" id="pointButton"
                  type="button" title="Report Incident"
                  style="align: center;">
              <i class="material-icons" style="font-size: 50px;">add</i>
          </button>
      </div>
      <div id="overlayBtn"
           style="position: absolute: bottom:0; left:5%; display: block; width: 90%;">
          <button class="action-button" id="activitiesBtn"
                  type="button" title="Report Incident" style="width: 30%; height: 50px; margin-left: 35%;"
                  onclick="showCards()"><i class="material-icons" style="font-size: 50px;">keyboard_arrow_up</i></button>
      </div>
  </div>

  <!-- Start the card interface -->
  <div id="overlayCards" style="display: none;">
      <div class="hideScroll container-fluid card-block">
          <div id="cardRow" class="row flex-nowrap card-block">
          </div>
      </div>
  </div>

<!--
  <div style="position: absolute; top:50%; left: 50%; z-index: 10">
      <p id="testOut">BOB</p>
  </div>
-->

  <script>
      activities = getActivities();
      // Loop over all activities and add them to the screen
      var len = activities.length;
      if (len > 10) {
          len = 10;
      }
      for (var i=0; i<activities.length; i++) {
          currDict = activities[i];
          var cardRow = document.getElementById("cardRow");

          var cardDiv = createCardOverlay(currDict, i);
          cardRow.appendChild(cardDiv);
      }
  </script>

</body>



{% endblock %}
